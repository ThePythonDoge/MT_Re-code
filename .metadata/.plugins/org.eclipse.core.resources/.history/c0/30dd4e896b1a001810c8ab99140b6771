package com.mortuusterra.managers;

import java.util.HashMap;

import org.bukkit.entity.Player;
import org.bukkit.scheduler.BukkitRunnable;
import org.bukkit.scheduler.BukkitTask;

import com.mortuusterra.MortuusTerraMain;

public class MTRadiation {

	private MortuusTerraMain main;

	private HashMap<Player, BukkitTask> map = new HashMap<Player, BukkitTask>();

	public MTRadiation(MortuusTerraMain m) {
		this.main = m;
	}

	public void addPlayer(Player p) {
		map.put(p, new BukkitRunnable() {

			@Override
			public void run() {
				if (playerCheck(p)) {
					new BukkitRunnable() {
						
						@Override
						public void run() {
							p.damage(1.5);							
						}
					}.runTask(main);
					cancel();
				}

			}
		}.runTaskTimerAsynchronously(main, 20, 60)); // wait 1 second(20 ticks) to run the task timer, and run the task
														// timer again after 3 seconds(60 ticks)
	}
	
	public void removePlayer(Player p) {
		map.get(p).cancel();
		map.remove(p);
	}

	// check if the player can be damaged by radiation
	public boolean playerCheck(Player p) {
		return true;
	}

}
